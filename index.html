<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>WireGuard Config Builder</title>
  <style>
    body {
      background: #0e1013;
      color: #fff;
      direction: rtl;
      font-family: sans-serif;
      padding: 20px;
    }
    h1, h2 {
      color: #0af;
    }
    .box {
      background: #1a1d23;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }
    label {
      margin-top: 10px;
      display: block;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      margin-bottom: 10px;
      background: #252932;
      border: 1px solid #333;
      border-radius: 6px;
      color: white;
    }
    button {
      padding: 10px 16px;
      background: #0af;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <h1>Ø³Ø§Ø®Øª ÙØ§ÛŒÙ„ WireGuard</h1>

  <div class="box">
    <label>Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ú©Ø§Ù†ÙÛŒÚ¯ (Ø¨Ø¯ÙˆÙ† .conf):</label>
    <input type="text" id="filename" placeholder="Ù…Ø«Ù„Ø§Ù‹ MyGameVpn">

    <label>Ú©Ø¯ Ø±ÛŒØ¯ÛŒÙ…:</label>
    <input type="text" id="redeem">

    <label>Ø§Ù¾Ø±Ø§ØªÙˆØ±:</label>
    <select id="operator"></select>

    <label>Ø³Ø±ÙˆØ±:</label>
    <select id="server"></select>

    <label>Ù¾ÙˆØ±Øª:</label>
    <input type="number" id="port" value="443">

    <label>Ø¨Ø§Ø²ÛŒ:</label>
    <select id="game"></select>

    <button onclick="generateConfig()">ğŸ® ØªÙˆÙ„ÛŒØ¯ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„</button>
  </div>

  <div class="box">
    <h2>ğŸ“¢ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¢ÛŒØ¯ÛŒ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯:</h2>
    <p id="telegram">@DefaultSupport</p>
  </div>

  <div class="box">
    <h2>ğŸ” ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†</h2>
    <input type="password" id="adminPass" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
    <button onclick="loginAdmin()">ÙˆØ±ÙˆØ¯</button>

    <div id="adminPanel" class="hidden">
      <label>ØªØºÛŒÛŒØ± Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…:</label>
      <input type="text" id="telegramInput">
      <button onclick="setTelegramID()">Ø°Ø®ÛŒØ±Ù‡ Ø¢ÛŒØ¯ÛŒ</button>

      <label>Ø§ÙØ²ÙˆØ¯Ù† Ø§Ù¾Ø±Ø§ØªÙˆØ±:</label>
      <input type="text" id="newOperator">
      <button onclick="addOperator()">â•</button>

      <label>Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø±ÙˆØ±:</label>
      <input type="text" id="serverName" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø¢Ù„Ù…Ø§Ù† - Hetzner">
      <input type="text" id="serverIP" placeholder="Ù…Ø«Ù„Ø§Ù‹ 168.119.50.50">
      <button onclick="addServer()">â•</button>

      <label>Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø§Ø²ÛŒ:</label>
      <input type="text" id="gameName" placeholder="Ù†Ø§Ù… Ø¨Ø§Ø²ÛŒ">
      <input type="text" id="gameCIDR" placeholder="Ù…Ø«Ù„Ø§Ù‹ 43.249.37.0/24">
      <button onclick="addGame()">â•</button>

      <label>Ø³Ø§Ø®Øª Ú©Ø¯ Ø±ÛŒØ¯ÛŒÙ…:</label>
      <button onclick="generateCode()">ğŸ« ØªÙˆÙ„ÛŒØ¯ Ú©Ø¯</button>
      <textarea id="codeList" rows="4" readonly></textarea>
    </div>
  </div>

  <script>
    const adminPassword = "pTAKAYP";
    const clientKey = "wMzBFH26CKPyGMFMjB4XoweSSXePVF8BAxjmxKIzh3I=";
    const serverKey = "rxFyqVGPYP7WkCeGGTx5YbxgKFdTY3v9eBKVYZkgWEE=";

    let codes = ["ABCD1234", "XYZ9876"];
    let operators = ["Irancell", "Hamrah Aval"];
    let servers = { "Ø¢Ù„Ù…Ø§Ù† - Hetzner": "168.119.50.50", "Ø§ÛŒØ±Ø§Ù† - Mobinnet": "10.202.10.10" };
    let games = { "PUBG": "43.249.37.0/24", "Call of Duty": "3.120.140.0/22" };

    function fillDropdowns() {
      document.getElementById("operator").innerHTML = operators.map(op => `<option>${op}</option>`).join('');
      document.getElementById("server").innerHTML = Object.entries(servers).map(([name, ip]) => `<option value="${ip}">${name}</option>`).join('');
      document.getElementById("game").innerHTML = Object.entries(games).map(([name, ip]) => `<option value="${ip}">${name}</option>`).join('');
      document.getElementById("codeList").value = codes.join("\\n");
    }

    function generateConfig() {
      const filename = document.getElementById("filename").value.trim();
      const code = document.getElementById("redeem").value.trim();
      if (!codes.includes(code)) return alert("Ú©Ø¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…ØµØ±Ùâ€ŒØ´Ø¯Ù‡ Ø§Ø³Øª.");
      codes = codes.filter(c => c !== code);
      fillDropdowns();

      const ip = document.getElementById("server").value;
      const port = document.getElementById("port").value;
      const cidr = document.getElementById("game").value;

      const config = `[Interface]
PrivateKey = ${clientKey}
Address = 10.66.66.2/24
DNS = 8.8.8.8

[Peer]
PublicKey = ${serverKey}
Endpoint = ${ip}:${port}
AllowedIPs = ${cidr}
PersistentKeepalive = 25`;

      const blob = new Blob([config], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = (filename || "wireguard") + ".conf";
      a.click();
    }

    function loginAdmin() {
      const pass = document.getElementById("adminPass").value;
      if (pass === adminPassword) {
        document.getElementById("adminPanel").classList.remove("hidden");
        fillDropdowns();
      } else {
        alert("Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!");
      }
    }

    function setTelegramID() {
      const id = document.getElementById("telegramInput").value.trim();
      if (id.startsWith("@")) {
        document.getElementById("telegram").innerText = id;
        alert("Ø¢ÛŒØ¯ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!");
      } else {
        alert("Ø¢ÛŒØ¯ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ @ Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯.");
      }
    }

    function generateCode() {
      const code = Math.random().toString(36).substr(2, 8).toUpperCase();
      codes.push(code);
      fillDropdowns();
      alert("Ú©Ø¯ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯: " + code);
    }

    function addOperator() {
      const op = document.getElementById("newOperator").value.trim();
      if (op && !operators.includes(op)) {
        operators.push(op);
        fillDropdowns();
        alert("Ø§Ù¾Ø±Ø§ØªÙˆØ± Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯!");
      }
    }

    function addServer() {
      const name = document.getElementById("serverName").value.trim();
      const ip = document.getElementById("serverIP").value.trim();
      if (name && ip) {
        servers[name] = ip;
        fillDropdowns();
        alert("Ø³Ø±ÙˆØ± Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯!");
      }
    }

    function addGame() {
      const name = document.getElementById("gameName").value.trim();
      const cidr = document.getElementById("gameCIDR").value.trim();
      if (name && cidr) {
        games[name] = cidr;
        fillDropdowns();
        alert("Ø¨Ø§Ø²ÛŒ Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯!");
      }
    }

    window.onload = fillDropdowns;
  </script>

</body>
</html>
